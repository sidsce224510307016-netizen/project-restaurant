<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rialto â€“ Order</title>

<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white p-6">

<h1 class="text-3xl font-bold mb-4">Rialto</h1>

<select id="orderType" class="w-full p-3 mb-3 text-black">
  <option value="">Select Order Type</option>
  <option value="dinein">Dine In</option>
  <option value="takeaway">Takeaway</option>
</select>

<input id="name" placeholder="Name" class="w-full p-3 mb-3 text-black">
<input id="people" type="number" placeholder="People" class="w-full p-3 mb-3 text-black">

<button onclick="placeOrder()" class="bg-yellow-500 text-black px-6 py-3 rounded">
  Place Order
</button>

<script>
async function placeOrder() {
  const payload = {
    name: name.value,
    items: ["Paneer Tikka", "Butter Naan"], // TEMP items
    people: Number(people.value)
  };

  const res = await fetch("/api/order", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });

  const data = await res.json();
  alert("Order sent to manager");
}
</script>
<script>
async function placeOrder() {
  try {
    const name = document.getElementById("custName")?.value;
    const people = document.getElementById("guestCount")?.value;

    if (!name || !people) {
      alert("Please enter name and number of people");
      return;
    }

    const payload = {
      name: name,
      people: Number(people),
      items: ["Paneer Tikka", "Butter Naan"] // TEMP menu
    };

    const response = await fetch("/api/order", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    });

    if (!response.ok) {
      throw new Error("Backend error");
    }

    alert("Order placed successfully. Please wait for table assignment.");
  } catch (err) {
    console.error(err);
    alert("Order failed. Check console.");
  }
}
</script>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rialto | Order</title>

<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>

<section class="hero">
  <img src="https://images.unsplash.com/photo-1555992336-03a23c53b0b6" class="active">
  <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836">

  <div class="glass" style="position:relative;z-index:1;max-width:400px;margin:0 auto;top:20%">
    <h2 class="page-title">Rialto</h2>

    <select id="orderType" class="btn btn-primary" style="width:100%;margin-bottom:10px">
      <option value="">Select Order Type</option>
      <option value="dinein">Dine In</option>
      <option value="takeaway">Takeaway</option>
    </select>

    <input id="custName" placeholder="Name" class="btn" style="width:100%;margin-bottom:10px">

    <input id="guestCount" type="number" placeholder="People"
      class="btn" style="width:100%;margin-bottom:10px">

    <button class="btn btn-primary" onclick="placeOrder()" style="width:100%">
      Place Order
    </button>

    <p id="msg" class="muted"></p>
  </div>
</section>

<script>
const supabase = supabaseJs.createClient(
  "https://gvadtfpunbhbhuqeqsiq.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd2YWR0ZnB1bmJoYmh1cWVxc2lxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwMTU1NjYsImV4cCI6MjA4NDU5MTU2Nn0.4IWXlhGf5zS9P-8MJs4uT9XUkbr8CIdwLMNHLm6AQKc"
);

async function placeOrder() {
  const { error } = await supabase.from("queue").insert({
    name: custName.value,
    people: Number(guestCount.value),
    items: ["Paneer Tikka", "Butter Naan"]
  });

  msg.innerText = error ? error.message : "Order placed. Wait for table.";
}
</script>

</body>
</html>

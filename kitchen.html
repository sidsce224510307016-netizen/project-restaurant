<!DOCTYPE html>
<html>
<head>
<title>Kitchen</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 text-white p-6">

<h1 class="text-2xl font-bold mb-4">Kitchen</h1>

<div id="orders"></div>

<script>
async function loadOrders() {
  const res = await fetch("/api/kitchen-orders");
  const orders = await res.json();

  const box = document.getElementById("orders");
  box.innerHTML = "";

  orders.forEach(o => {
    box.innerHTML += `
      <div class="bg-gray-800 p-4 rounded mb-3">
        <b>${o.name}</b> â€” Table ${o.table_number}
        <br>${o.items.join(", ")}
        <br>
        <button onclick="done(${o.id}, ${o.table_number})"
          class="bg-green-500 text-black px-3 py-1 mt-2 rounded">
          Done
        </button>
      </div>
    `;
  });
}

async function done(orderId, tableNumber) {
  await fetch("/api/order-done", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ orderId, tableNumber })
  });
}

setInterval(loadOrders, 3000);
loadOrders();
</script>

</body>
</html>

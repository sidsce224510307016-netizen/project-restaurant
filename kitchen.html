<!DOCTYPE html>
<html>
<head>
    <title>Kitchen Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <h2>Kitchen Orders</h2>
        <div id="kitchen-list"></div>
    </div>

    <script>
        const supabase = supabase.createClient('YOUR_SUPABASE_URL', 'YOUR_KEY');
        
        async function loadOrders() {
            const { data } = await supabase.from('orders').select('*').eq('status', 'Cooking');
            let html = '';
            data.forEach(o => {
                html += `<div class="card">
                    <div><b>Table ${o.table_id}</b>: ${o.customer_name}</div>
                    <button onclick="finish('${o.id}', '${o.table_id}')">DONE</button>
                </div>`;
            });
            document.getElementById('kitchen-list').innerHTML = html;
        }

        async function finish(orderId, tableId) {
            await supabase.from('orders').update({ status: 'Completed' }).eq('id', orderId);
            await supabase.from('tables').update({ status: 'Available' }).eq('id', tableId);
            loadOrders();
        }
        setInterval(loadOrders, 3000);
    </script>
</body>
</html>